<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Guide - Society Maintenance Billing</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            background: var(--gray-50);
        }

        .docs-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .docs-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .docs-header h1 {
            color: var(--gray-800);
            margin-bottom: 0.5rem;
        }

        .docs-header p {
            color: var(--gray-500);
        }

        .docs-nav {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .docs-nav h3 {
            margin: 0 0 1rem 0;
            color: var(--gray-700);
        }

        .docs-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .docs-nav li {
            margin: 0.5rem 0;
        }

        .docs-nav a {
            color: var(--primary);
            text-decoration: none;
        }

        .docs-nav a:hover {
            text-decoration: underline;
        }

        .docs-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .docs-section h2 {
            color: var(--primary);
            margin-top: 0;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-100);
        }

        .step {
            display: flex;
            gap: 1.5rem;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: var(--radius);
            border-left: 4px solid var(--primary);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--gray-800);
        }

        .step-content p {
            margin: 0;
            color: var(--gray-600);
        }

        .info-box {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            color: #1e40af;
            padding: 1rem;
            border-radius: var(--radius);
            margin: 1rem 0;
        }

        .warning-box {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            color: #92400e;
            padding: 1rem;
            border-radius: var(--radius);
            margin: 1rem 0;
        }

        .success-box {
            background: #dcfce7;
            border: 1px solid #86efac;
            color: #166534;
            padding: 1rem;
            border-radius: var(--radius);
            margin: 1rem 0;
        }

        .credentials-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .credentials-table th,
        .credentials-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border: 1px solid var(--gray-200);
        }

        .credentials-table th {
            background: var(--gray-50);
            font-weight: 600;
        }

        .screenshot-placeholder {
            background: var(--gray-100);
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius);
            padding: 3rem;
            text-align: center;
            color: var(--gray-500);
            margin: 1rem 0;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary);
            text-decoration: none;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        code {
            background: var(--gray-100);
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .btn-link {
            display: inline-block;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="docs-container">
        <a href="../index.html" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back to Login
        </a>

        <div class="docs-header">
            <h1>Setup Guide</h1>
            <p>Complete guide to set up and manage Society Maintenance Billing System</p>
        </div>

        <!-- Table of Contents -->
        <div class="docs-nav">
            <h3>Contents</h3>
            <ul>
                <li><a href="#initial-setup">Part 1: Initial Setup (One-Time)</a></li>
                <li><a href="#create-society">Part 2: Creating a New Society</a></li>
                <li><a href="#share-access">Part 3: Sharing Access with Members</a></li>
                <li><a href="#bulk-import">Part 4: Bulk Import Data (CSV)</a></li>
                <li><a href="#login-credentials">Login Credentials Reference</a></li>
                <li><a href="#faq">Frequently Asked Questions</a></li>
            </ul>
        </div>

        <!-- Part 1: Initial Setup -->
        <div class="docs-section" id="initial-setup">
            <h2>Part 1: Initial Setup (One-Time)</h2>
            <p>This setup needs to be done only once by the system administrator.</p>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Create Google Apps Script</h4>
                    <p>Go to <a href="https://script.google.com" target="_blank">script.google.com</a> and sign in with your Google account. Click "New Project" to create a new project.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Copy the Backend Code</h4>
                    <p>Open the file <code>google-apps-script.js</code> from your project folder. Copy all the code and paste it into the Google Apps Script editor (replace any existing code).</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Deploy as Web App</h4>
                    <p>Click <strong>Deploy</strong> â†’ <strong>New deployment</strong>. Select "Web app" as the type. Set "Execute as" to <strong>Me</strong> and "Who has access" to <strong>Anyone</strong>. Click Deploy.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Authorize the App</h4>
                    <p>Click "Authorize access" and allow the permissions. This lets the app create spreadsheets in your Google Drive.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h4>Copy the Web App URL</h4>
                    <p>After deployment, you'll see a URL that looks like:<br>
                    <code>https://script.google.com/macros/s/ABC...XYZ/exec</code><br>
                    Copy this URL.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">6</div>
                <div class="step-content">
                    <h4>Configure the Application</h4>
                    <p>Open the file <code>js/config.js</code> in a text editor. Find the line with <code>WEB_APP_URL</code> and paste your URL between the quotes. Save the file.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">7</div>
                <div class="step-content">
                    <h4>Upload to Web Hosting</h4>
                    <p>Upload all the files to your web hosting (like GitHub Pages, Netlify, or any web server). Your system is now ready!</p>
                </div>
            </div>

            <div class="success-box">
                <strong>Setup Complete!</strong> You can now login as Super Admin and start creating societies.
            </div>
        </div>

        <!-- Part 2: Create Society -->
        <div class="docs-section" id="create-society">
            <h2>Part 2: Creating a New Society</h2>
            <p>Follow these steps to register a new society in the system.</p>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Login as Super Admin</h4>
                    <p>Open the application and click on the <strong>"Super Admin"</strong> tab. Enter your Super Admin credentials and click Sign In.</p>
                </div>
            </div>

            <div class="info-box">
                <strong>Super Admin Credentials:</strong><br>
                Username and password are generated during the initial setup.<br>
                <em>(Check the Google Apps Script logs after running setupSuperadminSheet())</em>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Open Super Admin Dashboard</h4>
                    <p>After login, you'll see the Super Admin Dashboard showing all societies and statistics.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Click "Create Society"</h4>
                    <p>Click the <strong>"+ Create Society"</strong> button in the top right corner of the Societies section.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Fill Society Details</h4>
                    <p>Enter the following information:</p>
                    <ul>
                        <li><strong>Society Code:</strong> A unique short code (3-10 letters/numbers, e.g., "SUNSHINE", "ABC123")</li>
                        <li><strong>Society Name:</strong> Full name of the society (e.g., "Sunshine Apartments")</li>
                        <li><strong>Admin Password:</strong> Set a secure password for the society's admin account (min 6 characters, required)</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h4>Click "Create Society"</h4>
                    <p>Click the button and wait for the system to create the society. This will automatically create a new Google Spreadsheet for storing the society's data.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">6</div>
                <div class="step-content">
                    <h4>Save the Credentials</h4>
                    <p>After creation, you'll see:</p>
                    <ul>
                        <li>Society Code</li>
                        <li>Admin Username & Password</li>
                        <li>Link to the Google Spreadsheet</li>
                        <li><strong>Member Login Link</strong> (important!)</li>
                    </ul>
                    <p>Copy and save these details securely.</p>
                </div>
            </div>

            <div class="success-box">
                <strong>Society Created!</strong> The society now has its own database and admin account. Share the Member Login Link with society members.
            </div>
        </div>

        <!-- Part 3: Share Access -->
        <div class="docs-section" id="share-access">
            <h2>Part 3: Sharing Access with Members</h2>
            <p>How to give society members access to the billing system.</p>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Get the Member Login Link</h4>
                    <p>From the Super Admin Dashboard, click the <strong>view icon</strong> next to any society to see its details including the Member Login Link. Click <strong>"Copy Link"</strong> to copy it.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Share the Link</h4>
                    <p>Share the Member Login Link with society members through:</p>
                    <ul>
                        <li>WhatsApp group</li>
                        <li>Email</li>
                        <li>SMS</li>
                        <li>Notice board (print as QR code)</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Provide Login Credentials</h4>
                    <p>Members need their username and password to login. The society admin can create member accounts from the Admin Dashboard.</p>
                </div>
            </div>

            <div class="info-box">
                <strong>Tip:</strong> Create a QR code from the Member Login Link using free services like <a href="https://www.qr-code-generator.com/" target="_blank">qr-code-generator.com</a>. Print it on notice boards for easy access!
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Members Bookmark the Link</h4>
                    <p>Ask members to bookmark the link for easy future access. They only need to enter their username and password - the society is automatically selected from the link.</p>
                </div>
            </div>
        </div>

        <!-- Part 4: Bulk Import -->
        <div class="docs-section" id="bulk-import">
            <h2>Part 4: Bulk Import Data (CSV)</h2>
            <p>Save time by importing buildings, flats, and members in bulk using CSV files instead of adding them one by one.</p>

            <div class="warning-box">
                <strong>Important: Import Order</strong><br>
                You must import data in this specific order:
                <ol style="margin: 0.5rem 0 0 1.5rem;">
                    <li><strong>Buildings</strong> - Import buildings/wings first</li>
                    <li><strong>Flats</strong> - Import flats (requires buildings to exist)</li>
                    <li><strong>Members</strong> - Import members (can link to flats)</li>
                </ol>
            </div>

            <h3 style="margin-top: 2rem; color: var(--gray-700);">How to Import</h3>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Go to Master Data > Import Data</h4>
                    <p>Login as Society Admin and navigate to <strong>Master Data</strong> page. Click on the <strong>"Import Data"</strong> tab.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Download Template</h4>
                    <p>Click <strong>"Download Template"</strong> for the type of data you want to import (Buildings, Flats, or Members). This gives you a CSV file with the correct headers and sample data.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Fill Your Data</h4>
                    <p>Open the template in Excel or Google Sheets. Keep the header row and replace the sample data with your actual data. Save as CSV file.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Upload & Preview</h4>
                    <p>Click <strong>"Upload CSV File"</strong> and select your file. The system will show a preview with validation - green rows are valid, red rows have errors.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h4>Import</h4>
                    <p>Click <strong>"Import"</strong> to add all valid rows. Any rows with errors will be skipped - you can fix them and import again.</p>
                </div>
            </div>

            <h3 style="margin-top: 2rem; color: var(--gray-700);">CSV Template Details</h3>

            <!-- Buildings Template -->
            <h4 style="margin-top: 1.5rem;">1. Buildings Template</h4>
            <table class="credentials-table">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Required</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Name</code></td>
                        <td>Yes</td>
                        <td>Building or wing name</td>
                        <td>Building A</td>
                    </tr>
                    <tr>
                        <td><code>TotalFloors</code></td>
                        <td>No</td>
                        <td>Number of floors</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td><code>Address</code></td>
                        <td>No</td>
                        <td>Building address or location</td>
                        <td>Near Main Gate</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <strong>Sample Buildings CSV:</strong><br>
                <code style="display: block; margin-top: 0.5rem; white-space: pre; font-size: 0.8rem;">Name,TotalFloors,Address
Building A,10,Near Main Gate
Building B,12,East Wing
Building C,8,West Wing</code>
            </div>

            <!-- Flats Template -->
            <h4 style="margin-top: 1.5rem;">2. Flats Template</h4>
            <table class="credentials-table">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Required</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>FlatNo</code></td>
                        <td>Yes</td>
                        <td>Flat number/name</td>
                        <td>A-101</td>
                    </tr>
                    <tr>
                        <td><code>Building</code></td>
                        <td>Yes</td>
                        <td>Building name (must exist)</td>
                        <td>Building A</td>
                    </tr>
                    <tr>
                        <td><code>FlatType</code></td>
                        <td>Yes</td>
                        <td>Flat type (must exist in Master Data)</td>
                        <td>2 BHK</td>
                    </tr>
                    <tr>
                        <td><code>Area</code></td>
                        <td>No</td>
                        <td>Area in square feet</td>
                        <td>750</td>
                    </tr>
                    <tr>
                        <td><code>OwnerName</code></td>
                        <td>Yes</td>
                        <td>Owner's full name</td>
                        <td>John Doe</td>
                    </tr>
                    <tr>
                        <td><code>OwnerPhone</code></td>
                        <td>No</td>
                        <td>10-digit phone number</td>
                        <td>9876543210</td>
                    </tr>
                    <tr>
                        <td><code>OwnerEmail</code></td>
                        <td>No</td>
                        <td>Email address</td>
                        <td>owner@example.com</td>
                    </tr>
                    <tr>
                        <td><code>TwoWheelers</code></td>
                        <td>No</td>
                        <td>Number of 2-wheelers parked inside</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><code>FourWheelers</code></td>
                        <td>No</td>
                        <td>Number of 4-wheelers parked inside</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><code>IsOccupied</code></td>
                        <td>No</td>
                        <td>Yes or No</td>
                        <td>Yes</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <strong>Sample Flats CSV:</strong><br>
                <code style="display: block; margin-top: 0.5rem; white-space: pre; font-size: 0.8rem;">FlatNo,Building,FlatType,Area,OwnerName,OwnerPhone,OwnerEmail,TwoWheelers,FourWheelers,IsOccupied
A-101,Building A,2 BHK,750,Owner Name,0000000000,owner@example.com,1,1,Yes
A-102,Building A,1 BHK,450,Owner Name 2,0000000000,owner2@example.com,0,1,Yes
B-101,Building B,3 BHK,1100,Owner Name 3,0000000000,owner3@example.com,2,2,Yes</code>
            </div>

            <div class="warning-box">
                <strong>Note:</strong> The Building and FlatType values must match exactly with what you have in Master Data. If "Building A" doesn't exist, import will fail for that row.
            </div>

            <!-- Members Template -->
            <h4 style="margin-top: 1.5rem;">3. Members Template</h4>
            <table class="credentials-table">
                <thead>
                    <tr>
                        <th>Column</th>
                        <th>Required</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Username</code></td>
                        <td>Yes</td>
                        <td>Login username (min 3 chars)</td>
                        <td>john.doe</td>
                    </tr>
                    <tr>
                        <td><code>Password</code></td>
                        <td>Yes</td>
                        <td>Login password (min 4 chars)</td>
                        <td>password123</td>
                    </tr>
                    <tr>
                        <td><code>Name</code></td>
                        <td>Yes</td>
                        <td>Full name</td>
                        <td>John Doe</td>
                    </tr>
                    <tr>
                        <td><code>Email</code></td>
                        <td>No</td>
                        <td>Email address</td>
                        <td>user@example.com</td>
                    </tr>
                    <tr>
                        <td><code>Phone</code></td>
                        <td>No</td>
                        <td>Phone number</td>
                        <td>0000000000</td>
                    </tr>
                    <tr>
                        <td><code>Role</code></td>
                        <td>No</td>
                        <td>member or admin (default: member)</td>
                        <td>member</td>
                    </tr>
                    <tr>
                        <td><code>LinkedFlat</code></td>
                        <td>No</td>
                        <td>Flat number to link (must exist)</td>
                        <td>A-101</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <strong>Sample Members CSV:</strong><br>
                <code style="display: block; margin-top: 0.5rem; white-space: pre; font-size: 0.8rem;">Username,Password,Name,Email,Phone,Role,LinkedFlat
user1,yourpassword,Member Name,user1@example.com,0000000000,member,A-101
user2,yourpassword,Member Name 2,user2@example.com,0000000000,member,A-102
user3,yourpassword,Member Name 3,user3@example.com,0000000000,member,B-101</code>
            </div>

            <h3 style="margin-top: 2rem; color: var(--gray-700);">Tips for Successful Import</h3>
            <ul style="color: var(--gray-600); line-height: 1.8;">
                <li><strong>Keep the header row</strong> - Don't delete or modify the first row with column names</li>
                <li><strong>Check Building/FlatType names</strong> - They must match exactly (case-insensitive)</li>
                <li><strong>Save as CSV</strong> - When saving from Excel, choose "CSV (Comma delimited)"</li>
                <li><strong>No special characters in FlatNo</strong> - Use simple formats like A-101, B-202</li>
                <li><strong>Duplicate handling</strong> - If a flat or member already exists, it will be updated (not duplicated)</li>
                <li><strong>Fix errors and re-import</strong> - You can import the same file multiple times; only new/changed data will be added</li>
            </ul>

            <div class="success-box">
                <strong>Quick Start:</strong> Import 3 buildings, then 50 flats, then 50 members - all in under 5 minutes!
            </div>
        </div>

        <!-- Login Credentials -->
        <div class="docs-section" id="login-credentials">
            <h2>Login Credentials Reference</h2>

            <table class="credentials-table">
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>Username</th>
                        <th>Default Password</th>
                        <th>Access</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Super Admin</strong></td>
                        <td>(set during setup)</td>
                        <td>(generated during setup)</td>
                        <td>Create/manage all societies</td>
                    </tr>
                    <tr>
                        <td><strong>Society Admin</strong></td>
                        <td>admin</td>
                        <td>(set during society creation)</td>
                        <td>Manage one society (flats, bills, members)</td>
                    </tr>
                    <tr>
                        <td><strong>Member</strong></td>
                        <td>(created by admin)</td>
                        <td>(set by admin)</td>
                        <td>View own bills and payments</td>
                    </tr>
                </tbody>
            </table>

            <div class="warning-box">
                <strong>Security Reminder:</strong> Change all default passwords after first login!
            </div>
        </div>

        <!-- FAQ -->
        <div class="docs-section" id="faq">
            <h2>Frequently Asked Questions</h2>

            <h4>Q: Where is the society data stored?</h4>
            <p>Each society's data is stored in a separate Google Spreadsheet in the Super Admin's Google Drive. This ensures complete data isolation between societies.</p>

            <h4>Q: Can I access the data directly in Google Sheets?</h4>
            <p>Yes! From the Super Admin Dashboard, click the view icon for any society to get the link to its Google Spreadsheet.</p>

            <h4>Q: What happens if I delete a society?</h4>
            <p>Deleting a society only deactivates it - the data is preserved in Google Sheets. Members won't be able to login, but you can reactivate it later if needed.</p>

            <h4>Q: How many societies can I create?</h4>
            <p>There's no limit! Each society gets its own spreadsheet, so you can manage as many societies as needed.</p>

            <h4>Q: Do members need to know the society code?</h4>
            <p>No. When members use the Member Login Link, the society is automatically selected. They only need to enter their username and password.</p>

            <h4>Q: Can I use this offline?</h4>
            <p>No, an internet connection is required as the data is stored in Google Sheets.</p>
        </div>

        <div style="text-align: center; margin-top: 2rem; color: var(--gray-500);">
            <p>Need help? Contact your system administrator.</p>
        </div>
    </div>
</body>
</html>
